
<!-- extends表明此页面继承自 base.html 文件 -->
{% extends "base.html" %}
{% load staticfiles %}

<!-- 写入 base.html 中定义的 title -->
{% block title %}
    PanaCoder
{% endblock title %}

<!-- 写入 base.html 中定义的 content -->
{% block content %}

<!-- 定义放置文章标题的div容器 -->
<div class="container">

<!-- Coolors Palette Widget -->
<!-- <script src="https://coolors.co/palette-widget/widget.js"></script>
<script data-id="06616810887143609">new CoolorsPaletteWidget("06616810887143609", ["000000","14213d","fca311","e5e5e5","ffffff"]); </script> -->
<!-- Coolors Palette Widget -->
<!-- <script src="https://coolors.co/palette-widget/widget.js"></script>
<script data-id="024252984958563695">new CoolorsPaletteWidget("024252984958563695", ["e63946","f1faee","a8dadc","457b9d","1d3557"]); </script> -->

    <div class="text-secondary row font-weight-bold pt-2 choice">
        {% url 'article:article_list' as base_index %}
        {% url 'article:article_list_view' as view_index %}
        <a class="pb-2 {% if request.path == base_index %}active{% endif %}" href="{{ base_index }}">
            <i class="fa fa-bars mr-1"></i>Sort by Time</a>
        <a class="pb-2 ml-4 {% if request.path == view_index %}active{% endif %}" href="{{ view_index }}">
            <i class="fa fa-fire mr-1"></i>Sort by Views</a>
    </div>
    <div class="article-list">
        {% for article in articles %}
            <!-- 标题图 -->
            <div class="article-box row mb-1 mb-sm-2 p-2 p-lg-3">
                {% if article.image %}
                    <div class="col-3">
                        <img src="{{ article.image.url }}" 
                            alt="image" 
                            style="max-width:100%; border-radius: 10px"
                        >
                    </div>
                {% endif %}
                <!-- 文章内容 -->
                <div class="col">
                    <!-- Title -->
                    <h4 class="mt-0 font-weight-bold article-title">
                            <a href="{% url 'article:article_detail' article.id %}">
                                {{ article.title }}
                            </a>
                    </h4>
                    <!-- 摘要 -->
                    <div>
                        <p style="color: gray;">
                            {{ article.body|slice:'100' }}...
                        </p>
                    </div>
                    <!-- 注脚 -->
                    <p style="margin-bottom: -1px;">
                        <!-- 附加信息 -->
                        {% if article.column %}
                        <span style="color: #457b9d;">
                            <i class="fas fa-book"></i> {{ article.column }} &nbsp;
                        </span>
                        {% endif %}
                        <span style="color: gray;">
                            <i class="fas fa-eye"></i> {{ article.total_views }} &nbsp; 
                        </span>
                        <span style="color: grey;">
                            <i class="fas fa-clock"></i> {{ article.created|date:'Y-m-d' }} &nbsp;
                        </span>
                    </p>
                </div>
            </div>
        {% endfor %}
    </div>
    <div class="pagination row">
        <div class="m-auto">
            <div class="text-center mt-2 mt-sm-1 mt-md-0 mb-3 f-16">
                {% if page_obj.has_previous %}
                <a class="text-success" href="?page={{ page_obj.previous_page_number }}">&laquo; Prev</a>
                {% else %}
                <span class="text-secondary" title="Currently at first page">&laquo; Prev</span>
                {% endif %}
                <span class="mx-2">Page&nbsp;{{ page_obj.number }}&nbsp;/&nbsp;{{ paginator.num_pages }}</span>
                {% if page_obj.has_next %}
                <a class="text-success" href="?page={{ page_obj.next_page_number }}">Next &raquo;</a>
                {% else %}
                <span class="text-secondary" title="Currently at last page">Next &raquo;</span>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock content %}